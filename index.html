<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Innovation Generator</title>
    <link rel="stylesheet" href="style.css" media="all" type="text/css">
    <script src="libs/qrcode.min.js"></script>
    <script src="libs/screenfull.min.js"></script>
    <script type="text/javascript" src="words.js"></script>
    <script type="text/javascript" src="rtg.js"></script>
</head>
<body>
    <div id="words">
        <div id="adjective"></div>
        <div id="method"></div>
        <div id="format"></div>
    </div>
    <img src="" id="qrcode" class="qrcode"/>
    <img src="images/fullscreen-on.svg" id="fullscreen_toggle"/>
    <script type="text/javascript">
        window.onload = () => {
            const searchParams = new URL(window.location.href).searchParams;

            // add QR code reflecting the URL of the this exhibit
            let qrcode_url = searchParams.get("qrcode");
            if (qrcode_url == null)
                qrcode_url = window.location.href;
            if (qrcode_url === "") {
                document.getElementById("qrcode").style.display = 'none';
            } else {
                const qrcode = new QRCode({
                    content: qrcode_url,
                    padding: 1,
                    color: "#000000",
                    background: "#ffffff",
                    ecl: "M"
                });
                const svg = qrcode.svg();
                document.getElementById("qrcode").src = 'data:image/svg+xml;utf8,' + encodeURIComponent(svg);
            }

            // implement fullscreen toggle
            const fullscreen_toggle = document.getElementById('fullscreen_toggle');
            if (screenfull.enabled && (searchParams.get("fullscreen_toggle") !== "false")) {
                screenfull.on("change", () => {
                    fullscreen_toggle.style.display = screenfull.isFullscreen ? "none" : "";
                });
                const event_names = ["mousedown", "mouseup", "touchstart", "touchend"];
                event_names.forEach(event_name => fullscreen_toggle.addEventListener(event_name, event => event.stopPropagation()));
                fullscreen_toggle.addEventListener('click', event => {
                    event.stopPropagation();
                    screenfull.request();
                });
            } else {
                fullscreen_toggle.style.display = 'none';
            }

            assignRandomWords();
        }
    </script>
</body>
</html>
